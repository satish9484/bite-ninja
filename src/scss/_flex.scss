@use "sass:map";
@use "./variable" as *;
@use "./mixin" as *;
// Variables and mixins are now available through @forward

// =============================================================================
// FLEXBOX UTILITIES WITH CROSS-BROWSER SUPPORT
// =============================================================================

// Base Flexbox Classes
// =============================================================================

.d-flex {
  @include flexbox;
}

.d-inline-flex {
  @include inline-flex;
}

// Flex Direction
// =============================================================================

.flex-row {
  @include flex-direction(row);
}

.flex-row-reverse {
  @include flex-direction(row-reverse);
}

.flex-column {
  @include flex-direction(column);
}

.flex-column-reverse {
  @include flex-direction(column-reverse);
}

// Flex Wrap
// =============================================================================

.flex-wrap {
  @include flex-wrap(wrap);
}

.flex-nowrap {
  @include flex-wrap(nowrap);
}

.flex-wrap-reverse {
  @include flex-wrap(wrap-reverse);
}

// Justify Content
// =============================================================================

.justify-start {
  @include justify-content(flex-start);
}

.justify-end {
  @include justify-content(flex-end);
}

.justify-center {
  @include justify-content(center);
}

.justify-between {
  @include justify-content(space-between);
}

.justify-around {
  @include justify-content(space-around);
}

.justify-evenly {
  @include justify-content(space-evenly);
}

// Align Items
// =============================================================================

.items-start {
  @include align-items(flex-start);
}

.items-end {
  @include align-items(flex-end);
}

.items-center {
  @include align-items(center);
}

.items-baseline {
  @include align-items(baseline);
}

.items-stretch {
  @include align-items(stretch);
}

// Align Self
// =============================================================================

.self-start {
  @include align-self(flex-start);
}

.self-end {
  @include align-self(flex-end);
}

.self-center {
  @include align-self(center);
}

.self-baseline {
  @include align-self(baseline);
}

.self-stretch {
  @include align-self(stretch);
}

// Flex Properties
// =============================================================================

.flex-1 {
  @include flex(1, 1, 0%);
}

.flex-auto {
  @include flex(1, 1, auto);
}

.flex-initial {
  @include flex(0, 1, auto);
}

.flex-none {
  @include flex(0, 0, auto);
}

// Flex Grow
// =============================================================================

.flex-grow-0 {
  @include flex-grow(0);
}

.flex-grow-1 {
  @include flex-grow(1);
}

// Flex Shrink
// =============================================================================

.flex-shrink-0 {
  @include flex-shrink(0);
}

.flex-shrink-1 {
  @include flex-shrink(1);
}

// Flex Basis
// =============================================================================

.flex-basis-auto {
  @include flex-basis(auto);
}

.flex-basis-0 {
  @include flex-basis(0);
}

.flex-basis-full {
  @include flex-basis(100%);
}

// Order
// =============================================================================

.order-first {
  -webkit-order: -1;
  -ms-flex-order: -1;
  order: -1;
}

.order-last {
  -webkit-order: 999;
  -ms-flex-order: 999;
  order: 999;
}

.order-none {
  -webkit-order: 0;
  -ms-flex-order: 0;
  order: 0;
}

// Utility Classes
// =============================================================================

.flex-center {
  @include flexbox;
  @include align-items(center);
  @include justify-content(center);
}

.flex-between {
  @include flexbox;
  @include align-items(center);
  @include justify-content(space-between);
}

.flex-start {
  @include flexbox;
  @include align-items(center);
  @include justify-content(flex-start);
}

.flex-end {
  @include flexbox;
  @include align-items(center);
  @include justify-content(flex-end);
}

.flex-column-center {
  @include flexbox;
  @include flex-direction(column);
  @include align-items(center);
  @include justify-content(center);
}

.flex-column-between {
  @include flexbox;
  @include flex-direction(column);
  @include justify-content(space-between);
}

// =============================================================================
// RESPONSIVE FLEX UTILITIES
// =============================================================================

// Generate responsive flex utilities for all breakpoints
@each $breakpoint, $value in $breakpoints {
  @if $value > 0 {
    @include respond-to($breakpoint) {
      .#{$breakpoint}\:d-flex {
        @include flexbox;
      }

      .#{$breakpoint}\:d-inline-flex {
        @include inline-flex;
      }

      .#{$breakpoint}\:flex-row {
        @include flex-direction(row);
      }

      .#{$breakpoint}\:flex-row-reverse {
        @include flex-direction(row-reverse);
      }

      .#{$breakpoint}\:flex-column {
        @include flex-direction(column);
      }

      .#{$breakpoint}\:flex-column-reverse {
        @include flex-direction(column-reverse);
      }

      .#{$breakpoint}\:flex-wrap {
        @include flex-wrap(wrap);
      }

      .#{$breakpoint}\:flex-nowrap {
        @include flex-wrap(nowrap);
      }

      .#{$breakpoint}\:justify-start {
        @include justify-content(flex-start);
      }

      .#{$breakpoint}\:justify-end {
        @include justify-content(flex-end);
      }

      .#{$breakpoint}\:justify-center {
        @include justify-content(center);
      }

      .#{$breakpoint}\:justify-between {
        @include justify-content(space-between);
      }

      .#{$breakpoint}\:justify-around {
        @include justify-content(space-around);
      }

      .#{$breakpoint}\:justify-evenly {
        @include justify-content(space-evenly);
      }

      .#{$breakpoint}\:items-start {
        @include align-items(flex-start);
      }

      .#{$breakpoint}\:items-end {
        @include align-items(flex-end);
      }

      .#{$breakpoint}\:items-center {
        @include align-items(center);
      }

      .#{$breakpoint}\:items-baseline {
        @include align-items(baseline);
      }

      .#{$breakpoint}\:items-stretch {
        @include align-items(stretch);
      }

      .#{$breakpoint}\:self-start {
        @include align-self(flex-start);
      }

      .#{$breakpoint}\:self-end {
        @include align-self(flex-end);
      }

      .#{$breakpoint}\:self-center {
        @include align-self(center);
      }

      .#{$breakpoint}\:self-baseline {
        @include align-self(baseline);
      }

      .#{$breakpoint}\:self-stretch {
        @include align-self(stretch);
      }

      .#{$breakpoint}\:flex-1 {
        @include flex(1, 1, 0%);
      }

      .#{$breakpoint}\:flex-auto {
        @include flex(1, 1, auto);
      }

      .#{$breakpoint}\:flex-initial {
        @include flex(0, 1, auto);
      }

      .#{$breakpoint}\:flex-none {
        @include flex(0, 0, auto);
      }

      .#{$breakpoint}\:flex-grow-0 {
        @include flex-grow(0);
      }

      .#{$breakpoint}\:flex-grow-1 {
        @include flex-grow(1);
      }

      .#{$breakpoint}\:flex-shrink-0 {
        @include flex-shrink(0);
      }

      .#{$breakpoint}\:flex-shrink-1 {
        @include flex-shrink(1);
      }

      .#{$breakpoint}\:flex-center {
        @include flexbox;
        @include align-items(center);
        @include justify-content(center);
      }

      .#{$breakpoint}\:flex-between {
        @include flexbox;
        @include align-items(center);
        @include justify-content(space-between);
      }

      .#{$breakpoint}\:flex-start {
        @include flexbox;
        @include align-items(center);
        @include justify-content(flex-start);
      }

      .#{$breakpoint}\:flex-end {
        @include flexbox;
        @include align-items(center);
        @include justify-content(flex-end);
      }

      .#{$breakpoint}\:flex-column-center {
        @include flexbox;
        @include flex-direction(column);
        @include align-items(center);
        @include justify-content(center);
      }

      .#{$breakpoint}\:flex-column-between {
        @include flexbox;
        @include flex-direction(column);
        @include justify-content(space-between);
      }
    }
  }
}

// =============================================================================
// FLEXBOX FALLBACKS FOR OLDER BROWSERS
// =============================================================================

// IE10+ fallbacks
@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
  .d-flex {
    @include flexbox;
  }

  .d-inline-flex {
    @include inline-flex;
  }

  .flex-row {
    @include flex-direction(row);
  }

  .flex-column {
    @include flex-direction(column);
  }

  .justify-center {
    @include justify-content(center);
  }

  .justify-between {
    @include justify-content(space-between);
  }

  .items-center {
    @include align-items(center);
  }
}

// Webkit fallbacks for older versions
@supports not (display: flex) {
  .d-flex {
    display: -webkit-box;
    display: -webkit-flex;
  }

  .d-inline-flex {
    display: -webkit-inline-box;
    display: -webkit-inline-flex;
  }
}
